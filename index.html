<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Copy Paster</title>
	<link rel="stylesheet" type="text/css" href="https://bootswatch.com/4/lumen/bootstrap.min.css">
	<script src="/static/js/jquery.js"></script>
	<script src="/static/js/bootstrap.min.js"></script>
	<script src="/static/js/socket.io.js"></script>
</head>
<style type="text/css">
	body{
		margin-top: 50px;
	}
	.footer {
	  width: 100%;
	  /* Set the fixed height of the footer here */
	  height: 60px;
	  line-height: 60px; /* Vertically center the text there */
	}


</style>
<body>
	<div class="container">
		<center><h1>Copy Paster</h1></center>
		<hr>
	</div>

	<div class="container">
		<div class="row">
			<div class="col-md-4">
				<div class="alert alert-dismissible alert-success" id="total"></div>
				<br>
				<div class="card" id="shower" hidden="true">
					<div class="card-header"><center><h3>Pasted Content</h3></center></div>
					<div class="card-body">
						<pre id="copiedtext" style="height: 115px;"></pre>
					</div>
				</div>
				<br><br>
  			</div>
  			<div class="col-md-8">
	  			<div class="card">
					<div class="card-header"><center><h3>Paste a Text</h3></center></div>
					<div class="card-body">
						<div class="alert alert-dismissible alert-danger" id="error" hidden="true"></div>
					  	<label><b><i>Enter Some Text:</i></b></label>
					    <textarea class="form-control" id="content" required></textarea><br><hr>
					    <button type="submit" class="btn btn-block btn-lg btn-outline-primary" onclick="checkEmpty()">Broadcast this Text</button><hr>
					</div>
				</div>
  			</div>
  		</div>	
  	</div>

	<script type="text/javascript">
		var socket = io.connect();
		var content = $("#content");

		function checkEmpty(){
			if(content.val() === ''){
				$('#error').html('Please Enter some Text.');
				document.getElementById('error').hidden = false;
			}
			else{
				$('#error').html('');
				document.getElementById('error').hidden = true;
				socket.emit('content', content.val())
			}
		}


		socket.on('show connections', function(data){
			$('#total').html('<b>Total Active Connections are:</b> &nbsp;&nbsp;<strong style="color: white;">'+ data.connections + '</strong>')
		});	

		socket.on('copied text', function(data){
			var txt = data.ctext;
			$('#copiedtext').text(txt);
			document.getElementById('shower').hidden = false;
		});	

	</script>

	 <footer class="footer">
      <div class="container">
        <span class="text-muted copyright"><center><b style="color: black;">Copyright &copy; 2018 Copy Paster.</b></center></span>
      </div>
    </footer>
</body>
</html>